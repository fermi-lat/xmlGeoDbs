<derCategory name="derSC" save="true" >
  <overview>Derived constants specific to spacecraft</overview>
  <const name="SCCornerSide">
    <notes>Length of corner sides of primary structure octagon</notes>
    <mul>
      <refer refTo="sqrt2" />
      <half>
        <minus>
          <refer refTo="SCWidth" />
          <refer refTo="SCBigSide" />
        </minus>
      </half>
    </mul>
  </const>

  <const name="tankInnerRadius" >
    <notes>Inner radius for hydrazine tank (and radius of 
      sphere of hydrazine propellant)</notes>
    <minus>
      <refer refTo="tankOuterRadius" />
      <refer refTo="tankThickness" />
    </minus>
  </const>

  <const name="skirt_dz">
    <notes>Z-displacement of skirt</notes>
    <minus>
      <refer refTo="radTop_dz" />
      <add>
        <refer refTo="skirtTop_to_radTop" />
        <half>
          <refer refTo="skirt_z" />
        </half>
      </add>
    </minus>
  </const>

  <const name="SCBigSide_dt" >
    <notes>Transverse displacement of +x or +y side of 
          primary structure</notes>
    <half>
      <minus>
        <refer refTo="SCWidth" />
        <refer refTo="SC_thick" />
      </minus>
    </half>
  </const>

  <const name="SCBigSide_dtn" >
    <notes>Transverse displacement of -x or -y side of primary 
        structure</notes>
    <uminus>
      <refer refTo="SCBigSide_dt" />
    </uminus>
  </const>

  <const name="SCBigSideClosest" >
    <notes>Transverse distance between nearest point of big side and origin
    </notes>
    <minus>
      <refer refTo="SCBigSide_dt" />
      <half>
        <refer refTo="SC_thick" />
      </half>
    </minus>
  </const>

  <const name="SCCorner_dt" >
    <notes>Transverse displacement t of 45-degree sides of primary structure.
     Can be computed in terms of (half-)length of big side B and 45-degree
     side b and displacement T of big side:&lt;br /&gt;
       t**2 = ((B/2)**2 + T**2) - (b/2)**2 is distance.  Then each coord.
       is this quantity / sqrt(2)
     This is displacement of closest point.  Then add 1/2 thickness to
     get displacement of middle.
    </notes>
    <add>
      <sqrt>
        <mul>
          <minus>
            <add>
              <mul>
                <refer refTo="SCBigSide" />
                <refer refTo="SCBigSide" />
                <const value="0.25" uType="count" />
              </mul>
              <mul>
                <refer refTo="SCBigSideClosest" />
                <refer refTo="SCBigSideClosest" />
              </mul>
            </add>
            <mul>
              <refer refTo="SCCornerSide" />
              <refer refTo="SCCornerSide" />
              <const value="0.25" uType="count" />
            </mul>
          </minus>
          <const value="0.5" uType="count" />
        </mul>
      </sqrt>
      <refer refTo="SC_thick" />
    </add>
  </const>

  <const name="SCCorner_dtn" >
    <notes>Neg. displacement for corner sides</notes>
    <uminus>
      <refer refTo="SCCorner_dt" />
    </uminus>
  </const>

  <const name="SCStruct_dz" >
    <notes>Z displacement for all 8 primary structure volumes.
    Roughly, top of skirt = top of primary structure.  May refine
    this later.     
    </notes>
    <minus>
      <refer refTo="skirt_dz" />
      <half>
        <minus>
          <refer refTo="SC_z" />
          <refer refTo="skirt_z" />
        </minus>
      </half>
    </minus>
  </const>

  <const name="tank_dz" >
    <notes>vertical displacement for propellant tank and contents.
          Just assume it's on the bottom: bottom of tank lines up
          with bottom of primary structure</notes>
    <minus>
      <refer refTo="SCStruct_dz" />
      <minus>
        <half>
          <refer refTo="SC_z" />
        </half>
        <refer refTo="tankOuterRadius" />
      </minus>
    </minus>
  </const>
    
</derCategory>