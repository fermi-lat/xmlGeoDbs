<!-- $Header: /nfs/slac/g/glast/ground/cvs/xmlGeoDbs/xml/flight/flightACDAcd.xml,v 1.18 2005/09/15 01:06:08 jrb Exp $ -->
<!--  ACD geometry for flight instrument -->

<!-- In the new (as of Oct, 2002) scheme there are 6 different kinds 
     of top tiles.  Naming convention is 
                 topTileRiiiCjjj
     where iii refers to position along y-axis (hence row) and jjj refers to
     position along x-axis (column). jjj may take on the values
         edge (columns 0, 4), mid (columns 1, 3), cent (column 2)
     iii may take on values 
                 cent (row 2) def (everything else)

     Note tiles in columns 0 and 4 will have artificially-extended
     X-dimension (substituting for curved sections).  It can be read
     off of 3-d model as "x-extent", so all
     tile dimensions are primary constants.

     Tiles in rows 0 and 4 have a different Y dimension from
     those in 1,2,3.
 -->
<!-- Scale tile dimensions for operating temperature. July 20, 2005 -->
<!-- Rename "regular" tile boxes to envelopes, since they will become
     envelopes for compositions including screws
 -->
    <!-- e.g. row 0, col 0 -->
    <box name="topTileRedgeCedge"
         XREF="topTileXEdge_lOp"
         YREF="topTileYEdge_lOp"
         ZREF="tileThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <!-- e.g. row 2, col 0 -->
    
    <box name="topTileRcentCedge"
         XREF="topTileXEdge_lOp"
         YREF="topTileYCentral_lOp"
         ZREF="tileThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <!-- e.g. row 0, col 1 -->
    <box name="topTileRedgeCmid"
         XREF="topTileXMid_lOp"
         YREF="topTileYEdge_lOp"
         ZREF="tileThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <!-- e.g. row 2, col 1 -->
    <box name="topTileRcentCmid"
         XREF="topTileXMid_lOp"
         YREF="topTileYCentral_lOp"
         ZREF="tileThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <!-- row 0, col 2 -->
    <box name="topTileRedgeCcent"
         XREF="topTileXCentral_lOp"
         YREF="topTileYEdge_lOp"
         ZREF="tileCenterThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <!-- row 2, column 2 -->
    <box name="topTileRcentCcent"
         XREF="topTileXCentral_lOp"
         YREF="topTileYCentral_lOp"
         ZREF="tileCenterThicknessOp"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



     
<!-- Box definitions for top ribbons.  Ribbons at (more or less)
     constant x are all the same and just extend across the entire top.  
     Y-ribbons are split into 5 pieces of 3 different lengths.

     For now (6 Nov 2002) get rid of sensitive attribute for ribbons,
     e.g. eliminate all the lines in ribbon box definitions like this:

         sensitive="posHit"

  -->

    <box name="xRibbonTop"
         XREF="ribbonWidth"
         YREF="xRibbonTop_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         sensitive="posHit"
         detectorTypeREF="eDTypeACDRibbon" />



    <box name="yRibbonTopEdge"
         YREF="ribbonWidth"
         XREF="yRibbonTopEdge_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         sensitive="posHit"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="yRibbonTopMid"
         YREF="ribbonWidth"
         XREF="yRibbonTopMid_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         sensitive="posHit"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="yRibbonTopCent"
         YREF="ribbonWidth"
         XREF="yRibbonTopCent_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         sensitive="posHit"
         detectorTypeREF="eDTypeACDRibbon" />

    <!-- next assemble these pieces (25 top tiles, 4 long ribbons
         running parallel to Y-axis and 4 ribbons, each broken into
         5 segments, running parallel to X-axis. First make
         an envelope volume             -->
    <box name="ACDTopEnv" 
         XREF="ACDTopTransverse"
         YREF="ACDTopTransverse"
         ZREF="ACDTop_z"
         materialREF="vacuumMat"
         />

<!-- Done except for completing definition of ACDTop.  Assemble as
    follows: 
       tiles by increasing row number (<->increasing y-displacement) 
          within tile row order by increasing col. id (<-> increasing
          x displacement)
    Later will add ribbons:
       The 4 Y-ribbons in order of increasing X-displacement. 
       Each extends across the entire top.  All have same Z-displacement.
       Then the 20 X-ribbons.

-->
    <composition name="ACDTop" 
                 envelope="ACDTopEnv">
<!-- Row 0. Has largest negative y displacement -->
      <posXYZ volume="topTileRedgeCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileEdge_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/>
        <idField name="fRow" value="0" />
        <idField name="fCol" value="0" />
      </posXYZ>

      <posXYZ volume="topTileRedgeCmid"
              XREF="topTileMid_dxn"
              YREF="topTileEdge_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="0" />
        <idField name="fCol" value="1" />
      </posXYZ>

      <posXYZ volume="topTileRedgeCcent"
              YREF="topTileEdge_dyn"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="2"/>
      </posXYZ>



      <posXYZ volume="topTileRedgeCmid"
              XREF="topTileMid_dx"
              YREF="topTileEdge_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/>
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRedgeCedge"
              XREF="topTileEdge_dx"
              YREF="topTileEdge_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

<!-- row 1. Y displacement is topTileMid_dyn   child #5 -->
      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileMid_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dxn"
              YREF="topTileMid_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCcent"
              YREF="topTileMid_dyn"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dx"
              YREF="topTileMid_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dx"
              YREF="topTileMid_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="4"/>
      </posXYZ>


<!-- Middle row (2) of tiles. No Y displacement -->
      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dxn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dxn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCcent"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dx"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dx"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

<!-- row 3. Y displacement is topTileMid_dy -->
      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileMid_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dxn"
              YREF="topTileMid_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCcent"
              YREF="topTileMid_dy"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dx"
              YREF="topTileMid_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dx"
              YREF="topTileMid_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

     <!-- Row 4.  y displacement is topTileEdge_dy -->
      <posXYZ volume="topTileRedgeCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileEdge_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRedgeCmid"
              XREF="topTileMid_dxn"
              YREF="topTileEdge_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRedgeCcent"
              YREF="topTileEdge_dy"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRedgeCmid"
              XREF="topTileMid_dx"
              YREF="topTileEdge_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRedgeCedge"
              XREF="topTileEdge_dx"
              YREF="topTileEdge_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

<!-- now for x-ribbons -->
      <posXYZ volume="xRibbonTop"
              XREF="xRibbonOuter_dxn"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="1" /> 
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="xRibbonInner_dxn"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="1" />  
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="xRibbonInner_dx"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="1" />   
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="xRibbonOuter_dx"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>

<!-- Y ribbon segments.  They're || X-axis, so "measure" y. Do them by
     ribbon number (0 to 3, with 0 having most neg. Y displacment)
     and within ribbon by segment, in order of icreasing X-displ.
     There are 4 ribbons, each divided into 5 segements. -->
<!-- Ribbon 0 -->

      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>

<!-- Ribbon 1 -->

      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>

<!-- Ribbon 2 -->

      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>

<!-- Ribbon 3 -->    

      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>


     </composition>


<!-- Now for ACD sides (tiles and ribbons) -->

<!-- different box needed for each of the 4 rows of side tiles on X sides 
     and Y sides (X and Y sides have same tile dimensions.  Unfortunately,
     there are two different transverse-size/column mappings, one for
     sides 1 and 4 and another for sides 2 and 3.)
      and for each of 3 transverse positions
      except for bottom row which has just 1 long tile,
      so 10 different box definitions altogether.  Define them
      uniformly with tranverse dimension = x -->
<!-- 3 boxes for side row 0 -->

    <box name="sideTileR0EdgeLesser" 
         XREF="sideTileTransLesserOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight0Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>
    <box name="sideTileR0Mid" 
         XREF="sideTileTransMidOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight0Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



    <box name="sideTileR0EdgeGreater" 
         XREF="sideTileTransGreaterOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight0Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



<!-- 3 boxes for side row 1 -->
    <box name="sideTileR1EdgeLesser" 
         XREF="sideTileTransLesserOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight1Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



    <box name="sideTileR1Mid" 
         XREF="sideTileTransMidOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight1Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



    <box name="sideTileR1EdgeGreater" 
         XREF="sideTileTransGreaterOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight1Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


<!--       side row 2 -->
    <box name="sideTileR2EdgeLesser" 
         XREF="sideTileTransLesserOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight2Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <box name="sideTileR2Mid" 
         XREF="sideTileTransMidOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight2Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <box name="sideTileR2EdgeGreater" 
         XREF="sideTileTransGreaterOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight2Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>



<!-- Single tile in row 3 contains 6 of the screw squares defined above -->
    <box name="sideTileR3" 
         XREF="ACDTotalTransSideOp"
         YREF="tileThicknessOp"
         ZREF="sideTileHeight3Op"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"
     />


   <!-- now rotate them all 90 degrees for X tiles (flip x and y dimensions) 
        Do the rotation on individual tiles rather than assembling a side,
        then rotating because the latter screws up ids -->
<!-- Side ribbons are all congruent.  Define one with width in x,
     thickness in y.  Rotate for the opposite. -->

    <box name="sideRibbon"
         XREF="ribbonWidth"
         YREF="ribbonThickness"
         ZREF="ribbonsSideZ"
         materialREF="ribbonMat"
         sensitive="posHit"
         detectorTypeREF="eDTypeACDRibbon" />


<!-- Make rows for faces (2 & 3) with lesser trans. dimension first.
     Side 2 rotated +90 about Z is isomorphic to side 3.
 -->
    <stackX name="sideTileRow0Face2" >
      <axisPos volume="sideTileR0EdgeLesser">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR0EdgeGreater" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>

    <stackX name="sideTileRow1Face2" >
      <axisPos volume="sideTileR1EdgeLesser">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR1EdgeGreater" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>


    <stackX name="sideTileRow2Face2" >
      <axisPos volume="sideTileR2EdgeLesser">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR2EdgeGreater" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>



    <stackX name="sideTileRowR3" >
      <axisPos volume="sideTileR3">
        <idField name="fCol" value="0" />
      </axisPos>
    </stackX>


<!-- Do same for sides 1 and 4 
     Side 4 rotated +90 about Z is isomorphic to side 1. -->
    <stackX name="sideTileRow0Face4" >
      <axisPos volume="sideTileR0EdgeGreater">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR0EdgeLesser" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>

    <stackX name="sideTileRow1Face4" >
      <axisPos volume="sideTileR1EdgeGreater">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR1EdgeLesser" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>


    <stackX name="sideTileRow2Face4" >
      <axisPos volume="sideTileR2EdgeGreater">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileR2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileR2EdgeLesser" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>


<!-- Stack up the rows in Z for face 2 -->
    <stackZ name="TileFace2or3" >
      <axisPos volume="sideTileRowR3">
        <idField name="fRow" value="3" />
      </axisPos>
      <axisPos volume="sideTileRow2Face2" gapREF="sideVerticalGap" >
        <idField name="fRow" value="2" />
      </axisPos>
      <axisPos volume="sideTileRow1Face2" gapREF="sideVerticalGap" >
        <idField name="fRow" value="1" />
      </axisPos>
      <axisPos volume="sideTileRow0Face2" gapREF="sideVerticalGap" >
        <idField name="fRow" value="0" />
      </axisPos>
    </stackZ>

    <stackZ name="TileFace4or1" >
      <axisPos volume="sideTileRowR3">
        <idField name="fRow" value="3" />
      </axisPos>
      <axisPos volume="sideTileRow2Face4" gapREF="sideVerticalGap" >
        <idField name="fRow" value="2" />
      </axisPos>
      <axisPos volume="sideTileRow1Face4" gapREF="sideVerticalGap" >
        <idField name="fRow" value="1" />
      </axisPos>
      <axisPos volume="sideTileRow0Face4" gapREF="sideVerticalGap" >
        <idField name="fRow" value="0" />
      </axisPos>
    </stackZ>


    <!-- Make the envelope for a Y side of tiles, even though
         currently not using it -->
    <box name="TileYSideEnv"
         XREF="ACDTotalTransSide"
         YREF="tileThickness"
         ZREF="ACDSide_z" 
         materialREF="vacuumMat"
         />


    <!-- Make envelope for side of ribbons.  Has X as long dimension
         so will contain ribbons measuring X.  Can rotate for Y-ribbons -->
    <box name="xRibbonsEnv"
         XREF="ribbonsSideWidth"
         YREF="ribbonThickness"
         ZREF="ribbonsSideZ"
         materialREF="vacuumMat"
     />

    <!-- Make a composition for one side's worth of ribbons -->
    <composition name="sideRibbons" envelope="xRibbonsEnv" >
      <posXYZ volume="sideRibbon"
              XREF="xRibbonOuter_dxn" >
        <idField name="fRibbon" value="0" />
        <idField name="fRibbonSegment" value="0" />    

      </posXYZ>

      <posXYZ volume="sideRibbon"
              XREF="xRibbonInner_dxn" >
        <idField name="fRibbon" value="1" />
        <idField name="fRibbonSegment" value="0" />    
      </posXYZ>
      <posXYZ volume="sideRibbon"
              XREF="xRibbonInner_dx" >
        <idField name="fRibbon" value="2" />
        <idField name="fRibbonSegment" value="0" />    
      </posXYZ>
      <posXYZ volume="sideRibbon"
              XREF="xRibbonOuter_dx" >
        <idField name="fRibbon" value="3" />
        <idField name="fRibbonSegment" value="0" />    
      </posXYZ>
    </composition>


    <!-- stack up ribbons for X and Y sides -->
<!-- Make boxes for ACD supports.  Old scheme treated X- and Y- sides
     differently.  Now (July '03) we follow 3-d model and dovetail
     side supports. However we simplify by just defining two face sheet
     boxes: one for top and one for sides. -->
    <box name="ACDTopSupportCore" 
      XREF="ACDTopCoreTrans"
      YREF="ACDTopCoreTrans"
      ZREF="ACDTopCoreThickness"
      materialREF="ACDSupportCoreMat" />

    <box name="ACDTopSupportFace" 
      XREF="ACDTopCoreTrans"
      YREF="ACDTopCoreTrans"
      ZREF="ACDFaceThickness"
      materialREF="ACDSupportFaceMat" />

   <!-- the following side boxes have long dimension along Y-axis.  
      When positioned as is (no rotation) requires large X-displacement -->
    <box name="ACDSideSupportCore" 
      XREF="ACDSideCoreThickness"
      YREF="ACDSideCoreTrans"
      ZREF="ACDSideCoreZ"
      materialREF="ACDSupportCoreMat" />

    <box name="ACDSideSupportFace" 
      XREF="ACDFaceThickness"
      YREF="ACDSideCoreTrans"
      ZREF="ACDSideCoreZ"
      materialREF="ACDSupportFaceMat" />


<!-- Stack to form 2 support (logical) volumes.The side logical
     volume is positioned 4 times (2 of them rotated by 90 degrees)
     to make 5 physical support volumes -->
    <stackZ name="ACDTopSupport" >
      <axisPos volume="ACDTopSupportFace" />
      <axisPos volume="ACDTopSupportCore" />
      <axisPos volume="ACDTopSupportFace" />
    </stackZ>

<!-- Stack in X to make volume at more or less constant X.  This
     will be positioned with a large (+ and -) X displacement.  Then rotate
     and position at large Y displacementse.  -->
    <stackX name="ACDSideSupport" >
      <axisPos volume="ACDSideSupportFace"  />
      <axisPos volume="ACDSideSupportCore"  />
      <axisPos volume="ACDSideSupportFace"  />
    </stackX>

