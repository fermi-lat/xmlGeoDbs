<!-- $Header: /nfs/slac/g/glast/ground/cvs/xmlGeoDbs/xml/flight/flightACDAcd.xml,v 1.3 2002/07/31 18:50:13 jrb Exp $ -->
<!--  ACD geometry for flight instrument -->

<!-- In the new (as of Oct, 2002) scheme there are 6 different kinds 
     of top tiles.  Naming convention is 
                 topTileRiiiCjjj
     where iii refers to position along y-axis (hence row) and jjj refers to
     position along x-axis (column). jjj may take on the values
         edge (columns 0, 4), mid (columns 1, 3), cent (column 2)
     iii may take on values 
                 cent (row 2) def (everything else)

     Note tiles in columns 0 and 4 will have artificially-extended
     X-dimension (substituting for curved sections) which must be computed.
     All other tile dimensions are primary constants.
 -->
    <box name="topTileRdefCedge"
         XREF="topTileXEdgeTotal_l"
         YREF="topTileYEdge_l"
         ZREF="tileThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="topTileRcentCedge"
         XREF="topTileXEdgeTotal_l"
         YREF="topTileYCentral_l"
         ZREF="tileThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="topTileRdefCmid"
         XREF="topTileXMid_l"
         YREF="topTileYEdge_l"
         ZREF="tileThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="topTileRcentCmid"
         XREF="topTileXMid_l"
         YREF="topTileYCentral_l"
         ZREF="tileThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="topTileRdefCcent"
         XREF="topTileXCentral_l"
         YREF="topTileYEdge_l"
         ZREF="tileCenterThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="topTileRcentCcent"
         XREF="topTileXCentral_l"
         YREF="topTileYCentral_l"
         ZREF="tileCenterThickness"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

<!-- Box definitions for top ribbons.  Ribbons at (more or less)
     constant x are all the same and just extend across the entire top.  
     Y-ribbons are split into 5 pieces of 3 different lengths.

     For now (6 Nov 2002) get rid of sensitive attribute for ribbons,
     e.g. all the lines in ribbon box definitions like this:

         sensitive="posHit"

  -->
    <box name="xRibbonTop"
         XREF="ribbonWidth"
         YREF="xRibbonTop_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="yRibbonTopEdge"
         YREF="ribbonWidth"
         XREF="yRibbonTopEdge_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="yRibbonTopMid"
         YREF="ribbonWidth"
         XREF="yRibbonTopMid_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="yRibbonTopCent"
         YREF="ribbonWidth"
         XREF="yRibbonTopCent_l"
         ZREF="ribbonThickness"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

    <!-- next assemble these pieces (25 top tiles, 4 long ribbons
         running parallel to Y-axis and 4 ribbons, each broken into
         5 segments, running parallel to X-axis. First make
         an envelope volume             -->
    <box name="ACDTopEnv" 
         XREF="ACDTopTransverse"
         YREF="ACDTopTransverse"
         ZREF="ACDTop_z"
         materialREF="vacuumMat"
         />

<!-- Done except for completing definition of ACDTop.  Assemble as
    follows: 
       tiles by increasing row number (<->increasing y-displacement) 
          within tile row order by increasing col. id (<-> increasing
          x displacement)
       Then the 4 Y-ribbons in order of increasing X-displacement. 
       Each extends across the entire top.  All have same Z-displacement.
       Then the 20 X-ribbons.

-->
    <composition name="ACDTop" 
                 envelope="ACDTopEnv">
<!-- Row 0. Has largest negative y displacement -->
      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileEdge_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/>
        <idField name="fRow" value="0" />
        <idField name="fCol" value="0" />
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dxn"
              YREF="topTileEdge_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="0" />
        <idField name="fCol" value="1" />
      </posXYZ>

      <posXYZ volume="topTileRdefCcent"
              YREF="topTileEdge_dyn"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="2"/>
      </posXYZ>



      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dx"
              YREF="topTileEdge_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/>
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dx"
              YREF="topTileEdge_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="0"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

<!-- row 1. Y displacement is topTileMid_dyn   child #5 -->
      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileMid_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dxn"
              YREF="topTileMid_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCcent"
              YREF="topTileMid_dyn"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dx"
              YREF="topTileMid_dyn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dx"
              YREF="topTileMid_dyn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="1"/>
        <idField name="fCol" value="4"/>
      </posXYZ>


<!-- Middle row (2) of tiles. No Y displacement -->
      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dxn"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dxn"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCcent"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCmid"
              XREF="topTileMid_dx"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRcentCedge"
              XREF="topTileEdge_dx"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="2"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

<!-- row 3. Y displacement is topTileMid_dy -->
      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileMid_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dxn"
              YREF="topTileMid_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCcent"
              YREF="topTileMid_dy"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dx"
              YREF="topTileMid_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dx"
              YREF="topTileMid_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="3"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

     <!-- Row 4.  y displacement is topTileEdge_dy -->
      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dxn"
              YREF="topTileEdge_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="0"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dxn"
              YREF="topTileEdge_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="1"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCcent"
              YREF="topTileEdge_dy"
              ZREF="topTileCent_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="2"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCmid"
              XREF="topTileMid_dx"
              YREF="topTileEdge_dy"
              ZREF="topTileMid_dz" >
        <idField name="fACDCmp" valueREF="eACDTile"/> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="3"/>
      </posXYZ>

      <posXYZ volume="topTileRdefCedge"
              XREF="topTileEdge_dx"
              YREF="topTileEdge_dy"
              ZREF="topTileEdge_dz" >
        <idField name="fACDCmp" valueREF="eACDTile" /> 
        <idField name="fRow" value="4"/>
        <idField name="fCol" value="4"/>
      </posXYZ>

<!-- now for x-ribbons -->
      <posXYZ volume="xRibbonTop"
              XREF="topXRibbonOuter_dxn"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="1" /> 
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="topXRibbonInner_dxn"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="1" />  
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="topXRibbonInner_dx"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="1" />   
      </posXYZ>

      <posXYZ volume="xRibbonTop"
              XREF="topXRibbonOuter_dx"
              ZREF="topXRibbon_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureX" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>

<!-- X ribbon segments.  They're || X-axis, so "measure" y. Do them by
     ribbon number (0 to 3, with 0 having most neg. Y displacment)
     and within ribbon by segment, in order of icreasing X-displ.
     There are 4 ribbons, each divided into 5 segements. -->
<!-- Ribbon 0 -->
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonOuter_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="0" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>
    
<!-- Ribbon 1 -->
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonInner_dyn"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="1" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>

<!-- Ribbon 2 -->
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonInner_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="2" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>

<!-- Ribbon 3 -->    
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dxn"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="1" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dxn"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="2" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopCent"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonCent_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="3" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopMid"
              XREF="topYRibbonMid_dx"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonMid_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="4" />    
      </posXYZ>
      <posXYZ volume="yRibbonTopEdge"
              XREF="topYRibbonEdge_dx"
              YREF="topYRibbonOuter_dy"
              ZREF="topYRibbonEdge_dz" >
            <idField name="fACDCmp" valueREF="eACDRibbon" />
            <idField name="fMeasure" valueREF="eMeasureY" />
            <idField name="fRibbon"  value="3" />
            <idField name="fRibbonSegment" value="5" />    
      </posXYZ>


     </composition>


<!-- Now for ACD sides (tiles and ribbons) -->

<!-- different box needed for each of the 4 rows of side tiles on X sides 
     and Y sides (X and Y sides happen to have same dimensions now,
      but allow for difference) and for each of 3 transverse position,
      except for bottom row which has just 1 long tile,
      so 10 different box definitions altogether, just for tiles on 
      "X sides": the ones with thickness in X dimension, width in Y dim,
      and similarly for Y sides.!  -->

    <box name="sideTileY0Edge" 
         XREF="sideTileTransOuter"
         YREF="tileThickness"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY0Mid" 
         XREF="sideTileTransMid"
         YREF="tileThickness"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY0Central" 
         XREF="sideTileTransCentral"
         YREF="tileThickness"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY1Edge" 
         XREF="sideTileTransOuter"
         YREF="tileThickness"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY1Mid" 
         XREF="sideTileTransMid"
         YREF="tileThickness"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY1Central" 
         XREF="sideTileTransCentral"
         YREF="tileThickness"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


<!--       side row 2 -->

    <box name="sideTileY2Edge" 
         XREF="sideTileTransOuter"
         YREF="tileThickness"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY2Mid" 
         XREF="sideTileTransMid"
         YREF="tileThickness"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileY2Central" 
         XREF="sideTileTransCentral"
         YREF="tileThickness"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <box name="sideTileY3" 
         XREF="ACDTotalTransSide"
         YREF="tileThickness"
         ZREF="sideTileHeight3"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

   <!-- now rotate them all 90 degrees for X tiles (flip x and y dimensions) 
        Do the rotation on individual tiles rather than assembling a side,
        then rotating because the latter screws up ids -->

    <box name="sideTileX0Edge" 
         XREF="tileThickness"
         YREF="sideTileTransOuter"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX0Mid" 
         XREF="tileThickness"
         YREF="sideTileTransMid"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX0Central" 
         XREF="tileThickness"
         YREF="sideTileTransCentral"
         ZREF="sideTileHeight0"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX1Edge" 
         XREF="tileThickness"
         YREF="sideTileTransOuter"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX1Mid" 
         XREF="tileThickness"
         YREF="sideTileTransMid"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX1Central" 
         XREF="tileThickness"
         YREF="sideTileTransCentral"
         ZREF="sideTileHeight1"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


<!--       side row 2 -->

    <box name="sideTileX2Edge" 
         XREF="tileThickness"
         YREF="sideTileTransOuter"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX2Mid" 
         XREF="tileThickness"
         YREF="sideTileTransMid"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

    <box name="sideTileX2Central" 
         XREF="tileThickness"
         YREF="sideTileTransCentral"
         ZREF="sideTileHeight2"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>


    <box name="sideTileX3" 
         XREF="tileThickness"
         YREF="ACDTotalTransSide"
         ZREF="sideTileHeight3"
         materialREF="tileMat"
         sensitive="posHit" 
         detectorTypeREF="eDTypeACDTile"/>

<!-- Side ribbons are all congruent, but define two versions to avoid
     having to rotate.
     xSideRibbon is used on an "X-side", one at more or less constant x -->
    <box name="xSideRibbon"
         XREF="ribbonThickness"
         YREF="ribbonWidth"
         ZREF="sideRibbon_l"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

    <box name="ySideRibbon"
         XREF="ribbonWidth"
         YREF="ribbonThickness"
         ZREF="sideRibbon_l"
         materialREF="ribbonMat"
         detectorTypeREF="eDTypeACDRibbon" />

<!-- Make rows for Y sides -->
    <stackX name="sideTileRowY0" >
      <axisPos volume="sideTileY0Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileY0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileY0Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileY0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileY0Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>

    <stackX name="sideTileRowY1" >
      <axisPos volume="sideTileY1Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileY1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileY1Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileY1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileY1Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>


    <stackX name="sideTileRowY2" >
      <axisPos volume="sideTileY2Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileY2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileY2Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileY2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileY2Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackX>



    <stackX name="sideTileRowY3" >
      <axisPos volume="sideTileY3">
        <idField name="fCol" value="0" />
      </axisPos>
    </stackX>


<!-- Do same for X sides -->
    <stackY name="sideTileRowX0" >
      <axisPos volume="sideTileX0Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileX0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileX0Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileX0Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileX0Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackY>

    <stackY name="sideTileRowX1" >
      <axisPos volume="sideTileX1Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileX1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileX1Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileX1Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileX1Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackY>


    <stackY name="sideTileRowX2" >
      <axisPos volume="sideTileX2Edge">
        <idField name="fCol" value="0" />
      </axisPos>
      <axisPos volume="sideTileX2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="1" />
      </axisPos>
      <axisPos volume="sideTileX2Central" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="2" />
      </axisPos>
      <axisPos volume="sideTileX2Mid" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="3" />
      </axisPos>
      <axisPos volume="sideTileX2Edge" gapREF="sideHorizontalGap" >
        <idField name="fCol" value="4" />
      </axisPos>
    </stackY>


    <stackY name="sideTileRowX3" >
      <axisPos volume="sideTileX3">
        <idField name="fCol" value="0" />
      </axisPos>
    </stackY>

<!-- Stack up the rows in Z for an X-side and a Y-side -->
    <stackZ name="TileYSide" >
      <axisPos volume="sideTileRowY3">
        <idField name="fRow" value="3" />
      </axisPos>
      <axisPos volume="sideTileRowY2" gapREF="sideVerticalGap" >
        <idField name="fRow" value="2" />
      </axisPos>
      <axisPos volume="sideTileRowY1" gapREF="sideVerticalGap" >
        <idField name="fRow" value="1" />
      </axisPos>
      <axisPos volume="sideTileRowY0" gapREF="sideVerticalGap" >
        <idField name="fRow" value="0" />
      </axisPos>
    </stackZ>

    <stackZ name="TileXSide" >
      <axisPos volume="sideTileRowX3">
        <idField name="fRow" value="3" />
      </axisPos>
      <axisPos volume="sideTileRowX2" gapREF="sideVerticalGap" >
        <idField name="fRow" value="2" />
      </axisPos>
      <axisPos volume="sideTileRowX1" gapREF="sideVerticalGap" >
        <idField name="fRow" value="1" />
      </axisPos>
      <axisPos volume="sideTileRowX0" gapREF="sideVerticalGap" >
        <idField name="fRow" value="0" />
      </axisPos>
    </stackZ>


    <!-- Make the envelope for a Y side of tiles, even though
         currently not using it -->
    <box name="TileYSideEnv"
         XREF="ACDTotalTransSide"
         YREF="tileThickness"
         ZREF="ACDSide_z" 
         materialREF="vacuumMat"
         />


    <!-- stack up ribbons for X and Y sides -->
    <stackY name="sideRibbonsX" >
      <axisPos volume="xSideRibbon">
        <idField name="fRibbon" value="0"  />  
      </axisPos>
      <axisPos volume="xSideRibbon"
                gapREF="ribbonSideOuterGap">
        <idField name="fRibbon" value="1" />   
      </axisPos>
      <axisPos volume="xSideRibbon"
                gapREF="ribbonSideCentralGap">
        <idField name="fRibbon" value="2"  /> 
      </axisPos>
      <axisPos volume="xSideRibbon"
                gapREF="ribbonSideOuterGap">
        <idField name="fRibbon" value="3"  /> 
      </axisPos>

    </stackY>

    <stackX name="sideRibbonsY" >
      <axisPos volume="ySideRibbon">
        <idField name="fRibbon" value="0"  />  
      </axisPos>
      <axisPos volume="ySideRibbon"
                gapREF="ribbonSideOuterGap">
        <idField name="fRibbon" value="1" />   
      </axisPos>
      <axisPos volume="ySideRibbon"
                gapREF="ribbonSideCentralGap">
        <idField name="fRibbon" value="2"  />
      </axisPos>
      <axisPos volume="ySideRibbon"
                gapREF="ribbonSideOuterGap">
        <idField name="fRibbon" value="3"  />
      </axisPos>

    </stackX>

<!-- Make boxes for ACD supports (need 2 each for top, X-sides and
     Y-sides), then stack to form support volumes -->
    <box name="ACDTopSupportCore" 
      XREF="ACDTopSupportTran"
      YREF="ACDTopSupportTran"
      ZREF="ACDTopCoreThickness"
      materialREF="ACDSupportCoreMat" />

    <box name="ACDTopSupportFace" 
      XREF="ACDTopSupportTran"
      YREF="ACDTopSupportTran"
      ZREF="ACDFaceThickness"
      materialREF="ACDSupportFaceMat" />

    <box name="ACDYSideSupportCore" 
      XREF="ACDYSideSupport_l"
      YREF="ACDSideCoreThickness"
      ZREF="ACDSideSupport_z"
      materialREF="ACDSupportCoreMat" />

    <box name="ACDYSideSupportFace" 
      XREF="ACDTopSupportTran"
      YREF="ACDFaceThickness"
      ZREF="ACDSideSupport_z"
      materialREF="ACDSupportFaceMat" />

    <box name="ACDXSideSupportCore" 
      XREF="ACDSideCoreThickness"
      YREF="ACDXSideSupport_l"
      ZREF="ACDSideSupport_z"
      materialREF="ACDSupportCoreMat" />

    <box name="ACDXSideSupportFace" 
      XREF="ACDFaceThickness"
      YREF="ACDXSideSupport_l"
      ZREF="ACDSideSupport_z"
      materialREF="ACDSupportFaceMat" />

<!-- Stack to form 3 support (logical) volumes. Each side logical
     volume is positioned twice to make 5 physical support volumes -->
    <stackZ name="ACDTopSupport" >
      <axisPos volume="ACDTopSupportFace" />
      <axisPos volume="ACDTopSupportCore" />
      <axisPos volume="ACDTopSupportFace" />
    </stackZ>

<!-- Stack in Y to make volume at more or less constant Y, call it a
     it an Y side -->
    <stackY name="ACDYSideSupport" >
      <axisPos volume="ACDYSideSupportFace"  />
      <axisPos volume="ACDYSideSupportCore"  />
      <axisPos volume="ACDYSideSupportFace"  />
    </stackY>

    <stackX name="ACDXSideSupport" >
      <axisPos volume="ACDXSideSupportFace"  />
      <axisPos volume="ACDXSideSupportCore"  />
      <axisPos volume="ACDXSideSupportFace"  />
    </stackX>
