<!--  $Header: /nfs/slac/g/glast/ground/cvs/xmlGeoDbs/xml/flight/flightACDDerived.xml,v 1.25 2007/08/22 02:33:10 jrb Exp $ -->
<derCategory name="derACD" save="true" >
  <overview>Derived constants specific to the ACD</overview>

  <const name="sideVerticalGap" >
    <notes>Vertical gap between (rows of?) side tiles.  
     As of 10 May 2007, this is an overlap, hence negative</notes> 
    <uminus>
      <refer refTo="sideVerticalOverlap" />
    </uminus>
  </const>

  <const name="sideTileR0TransLesser">
    <notes>Transverse  dimension of one edge side tile tile per side: 
           column 4 for -X and +Y side (faces 1 and 4); column 0 for +X 
           side and -Y side (faces 2 and 3).
    </notes>
    <refer refTo="topTileXEdge_l" />
  </const>

  <const name="sideTileR0TransGreater">
    <notes>Transverse dimension of one edge side tile tile per side: 
           column 0 for -X and +Y side (faces 1 and 4); column 4 for 
           +X side and -Y side (faces 2 and 3).
    </notes>
    <add>
      <refer refTo="sideTileR0TransLesser" />
      <refer refTo="tileThickness" />
      <refer refTo="dovetailGap" />
    </add>
  </const>

  <const name="sideTileTransMid">
    <notes>Transverse dimension of side tiles in columns 1,2 and 3. </notes>
    <refer refTo="topTileXCentral_l" />
  </const>  

  <const name="tileSideThickness" >
    <notes>Thickness of ACD side depends on configuration of tiles.
           For now (May 2007) it's just double thickness of a single side
           tile + clearance
    </notes>
    <add>
      <refer refTo="tileThickness" />
      <refer refTo="tileThickness" />
      <refer refTo="sideTileOverlapClearance" />
    </add>
  </const>

  <const name="tileThickness_n" >
    <notes>May need to displace by neg. tile thickness</notes>
    <uminus>
      <refer refTo="tileThickness" />
    </uminus>
  </const>

  <const name="ACDSideSupportThick">
    <notes>Thickness of core + face sheets for side support</notes>
    <add>
      <refer refTo="ACDSideCoreThickness" />
      <refer refTo="ACDFaceThickness" />
      <refer refTo="ACDFaceThickness" />
    </add>
  </const>

  <const name="ACDTopSupportThick">
    <notes>Thickness of core + face sheets for top support</notes>
    <add>
      <refer refTo="ACDTopCoreThickness" />
      <refer refTo="ACDFaceThickness" />
      <refer refTo="ACDFaceThickness" />
    </add>
  </const>

  <const name="ACDTop_z" >
    <notes>Z dimension of envelope which will contain
     ACD top tiles and ribbons (1 nov 2002)
     As of July, '03, simply use information from 3-d model
     about location of top of topmost tiles and top of 
     support structure to compute this. As of 2005, top tiles and
     ribbons are no longer contained in an envelope, but this is
     still a convenient number to compute.</notes>
    <minus>
      <refer refTo="ACDTileMaxZ" />
      <refer refTo="ACDTopSupportMaxZ" />
    </minus>
  </const>

  <const name="ACDTopZHalf" >
    <notes>for convenience</notes>
    <half>
      <refer refTo="ACDTop_z" />
    </half>
  </const>

  <const name="ACDTop_d" >
    <notes>Z displacement of top ACD relative to Ritz origin.
          As of July, 2003, get frontmost tile position from
          3-d model version 6-23-03; compute from there.</notes>
    <minus>
      <refer refTo="ACDTileMaxZ" />
      <refer refTo="ACDTopZHalf" />
    </minus>
  </const>

  <const name="ACDSideThickness">
    <notes>This isn't really correct.  If overlapping and
      slant are taken into account, ACDSideThickness is
      over twice this value. (1 nov 2002)</notes>
    <refer refTo="tileThickness" />
  </const>

  <const name="ACDTotalR0TransSide" >
    <notes>transverse length of collection of ACD side tiles,
        e.g those alone -X side of instrument. Compute as sum of tranverse
        dimensions of tiles in R0, columns 0-5, plus gaps</notes>
    <add>
      <refer refTo="sideTileR0TransLesser" />
      <refer refTo="sideTileR0TransGreater" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <mul>
        <const value="4" uType="count" />
        <refer refTo="sideHorizontalGap" />
      </mul>
    </add>
  </const>


  <const name="ACDTotalR1TransSide" >
    <notes>transverse length of collection of ACD side tiles,
        e.g those alone -X side of instrument.
         Compute as sum of tranverse
        dimensions of tiles in R1, columns 0-5, plus gaps</notes>
    <add>
      <refer refTo="sideTileR1TransLesser" />
      <refer refTo="sideTileR1TransGreater" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <mul>
        <const value="4" uType="count" />
        <refer refTo="sideHorizontalGap" />
      </mul>
    </add>
  </const>

  <const name="ACDTotalR2TransSide" >
    <notes>transverse length of collection of ACD side tiles,
        e.g those alone -X side of instrument.
         Compute as sum of tranverse
        dimensions of tiles in R1, columns 0-5, plus gaps</notes>
    <add>
      <refer refTo="sideTileR2TransLesser" />
      <refer refTo="sideTileR2TransGreater" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <refer refTo="sideTileTransMid" />
      <mul>
        <const value="4" uType="count" />
        <refer refTo="sideHorizontalGap" />
      </mul>
    </add>
  </const>


<!-- Scaled versions  for operating temp. -->
  <const name="ACDTotalR0TransSideOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="ACDTotalR0TransSide" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>


  <const name="sideTileR3TransOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR3Trans" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>




<!-- Scale tile thicknesses for operating temperature -->
  <const name="tileThicknessOp">
    <notes>Scaled tile thickness (all but top center tiles)</notes>
    <mul>
      <refer refTo="tileThickness" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="tileCenterThicknessOp">
    <notes>Scaled tile thickness for top center tiles)</notes>
    <mul>
      <refer refTo="tileCenterThickness" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="ACDSidesGap">
    <notes>Min. distance between tiles of the two sides || to x-axis
         or equivalently of the two sides || to y-axis.
         Use displacement info for top row of tiles from from 3-d model
    </notes>
    <minus>
      <mul>
        <refer refTo="tileSideR0_dt" />
        <const value="2" uType="count" />
      </mul>
      <refer refTo="tileThickness" />
    </minus>
  </const>

  <const name="tileSideR0_dtn" >
    <notes>Transvere displacement for tiles on neg X and neg Y face</notes>
    <uminus>
      <refer refTo="tileSideR0_dt" />
    </uminus>
  </const>

  <const name="tileSideR1_dtn" >
    <notes>Transvere displacement for tiles on neg X and neg Y face</notes>
    <uminus>
      <refer refTo="tileSideR1_dt" />
    </uminus>
  </const>

  <const name="tileSideR2_dtn" >
    <notes>Transvere displacement for tiles on neg X and neg Y face</notes>
    <uminus>
      <refer refTo="tileSideR2_dt" />
    </uminus>
  </const>

  <const name="tileSideR3_dtn" >
    <notes>Transvere displacement for tiles on neg X and neg Y face</notes>
    <uminus>
      <refer refTo="tileSideR3_dt" />
    </uminus>
  </const>

  <const name="sideTileR1_an" uType="count" >
    <notes>Slant angle used for side tiles in row 1 in neg faces.
    </notes>
    <uminus>
      <refer refTo="sideTileR1_a" />
    </uminus>
  </const>

  <const name="sideTileR2_an" uType="count">
    <notes>Slant angle used for side tiles in row 2 in neg faces.
    </notes>
    <uminus>
      <refer refTo="sideTileR2_a" />
    </uminus>
  </const>

  <const name="ACDTopTransverse" >
    <notes>Transverse dimension of envelope which will contain
    ACD top tiles and ribbons.  As of July 2003, just set to 
    value large enough to include all top tiles as positioned
    from 3-d model.  From this model there is an approx. 3 mm
    (actually 3.3)   gap between side tiles (top row) and top tiles 
  </notes>
    <minus>
      <refer refTo="ACDSidesGap" />
      <mul>
        <refer refTo="ACDSideTopTileGap" />
        <const value="2" uType="count" />                  
      </mul>
    </minus>          
  </const>


<!--   %%%% Need to revisit the extra mm %%%% -->
  <const name="ACDTotalX">
    <notes>Total extent in X of entire collection of ACD pieces,
          plus a millimeter for good luck (4 nov 2002) </notes>
    <add>
      <refer refTo="ACDSidesGap" />
      <refer refTo="ACDSideThickness" />
      <refer refTo="ACDSideThickness" />
      <const value="1.0" />
    </add>
  </const>

  <const name="ACDTotalY">
    <notes>Total extent in Y of entire collection of ACD pieces</notes>
    <refer refTo="ACDTotalX" />
  </const>


<!-- Scale all top tile transverse dimensions for operating temperature -->
  <const name="topTileXEdge_lOp">
    <notes>Scaled version of topTileXEdge_l
    </notes>
    <mul>
      <refer refTo="topTileXEdge_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="topTileXMid_lOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="topTileXMid_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>
  <const name="topTileXCentral_lOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="topTileXCentral_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>
  <const name="topTileYEdge_lOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="topTileYEdge_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>
  <const name="topTileYMid_lOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="topTileYMid_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>
  <const name="topTileYCentral_lOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="topTileYCentral_l" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

<!-- Z dimension of extra piece for bent tiles -->
  <const name="topTileBentZOp">
    <notes>Scaled for operating temperature</notes>
    <mul>
      <refer refTo="topTileBentZ" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

<!-- Scaled versions of side tile dimensions -->
  <const name="sideTileHeight0Op">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileHeight0" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileHeight1Op">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileHeight1" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileHeight2Op">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileHeight2" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileHeight3Op">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileHeight3" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>


  <const name="sideTileR0TransLesserOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR0TransLesser" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileR1TransLesserOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR1TransLesser" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileR2TransLesserOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR2TransLesser" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileR0TransGreaterOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR0TransGreater" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileR1TransGreaterOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR1TransGreater" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

  <const name="sideTileR2TransGreaterOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileR2TransGreater" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>


  <const name="sideTileTransMidOp">
    <notes>Scaled for operating temperature 
    </notes>
    <mul>
      <refer refTo="sideTileTransMid" />
      <refer refTo="ACDTileScale" />
    </mul>
  </const>

<!-- Screws are divided into 2 pieces: the part embedded in a tile (which
     is a s long as the tile is thick) and the part sticking out.  Since
     there are two thicknesses of tiles, need two more constants for the
     sticking-out parts
 -->
<!--
  <const name="screwExtLen" >
    <notes>Length of screw part sticking out of normal-thickness tile
    </notes>
    <minus>
      <refer refTo="ACDScrewLen" />
      <refer refTo="tileThickness" />
    </minus>
  </const>

  <const name="screwExtThickLen" >
    <notes>Length of screw part sticking out of thick (top central) tile
    </notes>
    <minus>
      <refer refTo="ACDScrewLen" />
      <refer refTo="tileCenterThickness" />
    </minus>
  </const>
    -->  
<!-- displacements for screws in side tiles (other than bottom row) -->

<!-- Z-displacement for screws in side tiles (5 cm from edges) -->
<!--
  <const name="side0Screw_dz">
    <notes>z-displacement for screws on +z side of top row (0) side tiles
    </notes>
    <half>
      <minus>
        <refer refTo="sideTileHeight0" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="side0Screw_dzn">
    <notes>z-displacement for screws on -z side of top row side tiles
    </notes>
    <uminus>
      <refer refTo="side0Screw_dz" />
    </uminus>
  </const>

  <const name="side1Screw_dz">
    <notes>z-displacement for screws on +z side of row 1 side tiles
    </notes>
    <half>
      <minus>
        <refer refTo="sideTileHeight1" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="side1Screw_dzn">
    <notes>z-displacement for screws on -z side of row 1 side tiles
    </notes>
    <uminus>
      <refer refTo="side1Screw_dz" />
    </uminus>
  </const>

  <const name="side2Screw_dz">
    <notes>z-displacement for screws on +z side of row 2 side tiles
    </notes>
    <half>
      <minus>
        <refer refTo="sideTileHeight2" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="side2Screw_dzn">
    <notes>z-displacement for screws on -z side of row 2 side tiles
    </notes>
    <uminus>
      <refer refTo="side2Screw_dz" />
    </uminus>
  </const>
-->
<!-- transverse displacement for screws in side tiles (5 cm from edges) -->
<!--
  <const name="sideLesserScrew_dt">
    <notes>Transverse (x or y) displacement for screws on some narrower
           side tiles (col 0 for sides 2 or 3; col 4 for
           sides 1 and 4)</notes>
    <half>
      <minus>
        <refer refTo="sideTileTransLesser" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="sideLesserScrew_dtn">
    <notes>Transverse (x or y) displacement for screws on outer
           side tiles (negative direction</notes>
    <uminus>
      <refer refTo="sideLesserScrew_dt" />
    </uminus>
  </const>


  <const name="sideGreaterScrew_dt">
    <notes>Transverse (x or y) displacement for screws on wider outer
           side tiles (col 4 for sides 2 or 3; col 0 for
           sides 1 and 4)</notes>
    <half>
      <minus>
        <refer refTo="sideTileTransGreater" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="sideGreaterScrew_dtn">
    <notes>Transverse (x or y) displacement for screws on wider
           side tiles (negative direction</notes>
    <uminus>
      <refer refTo="sideGreaterScrew_dt" />
    </uminus>
  </const>

  <const name="sideMidScrew_dt">
    <notes>Transverse (x or y) displacement for screws on 
           side tiles in cols 1,2,3</notes>
    <half>
      <minus>
        <refer refTo="sideTileTransMid" />
        <refer refTo="ACDScrewFromEdge" />
      </minus>
    </half>
  </const>

  <const name="sideMidScrew_dtn">
    <notes>Transverse (x or y) displacement for screws in side
           tiles, cols 1,2,3 (negative direction)</notes>
    <uminus>
      <refer refTo="sideMidScrew_dt" />
    </uminus>
  </const>
 -->
<!-- 
    screws in bottom side tiles come in groups of 4, the vertices of
    squares 5 cm on a side.  The squares are evenly spaced across
    the tile
  -->
<!--
   <const name="ACDScrewSqSide" >
     <notes>Total length of side of a minimal square containing a group
        of 4 screws </notes>
     <add>
        <refer refTo="ACDScrewCenterDiff" />
        <mul>
           <refer refTo="ACDHoleRad" />
           <const value="2" uType="count" />
        </mul>
      </add>
   </const>

       
   <const name="ACDScrewSqMin_d" >
     <notes>Half of distance between centers of adjacent screw squares,
            equal to transverse displacement of most central squares</notes>
     <half>
       <quo>
         <refer refTo="ACDTotalTransSideOp" />
         <refer refTo="ACDNumScrewSq" />
       </quo>
     </half>
   </const>
-->
<!-- transverse displacements for the 6 screw squares are multiples of
     the above -->
<!--
   <const name="ACDScrewSqMin_dn">
     <notes>Smallest neg. displacement of a screw square</notes>
     <uminus>
       <refer refTo="ACDScrewSqMin_d" />
     </uminus>
   </const>

   <const name="ACDScrewSqMin3_d">
      <notes>Displacement for squares 2 and 5</notes>
      <mul>
        <refer refTo="ACDScrewSqMin_d" />
        <const value="3" uType="count" />
      </mul>
   </const>

   <const name="ACDScrewSqMin3_dn">
     <notes>Neg. displacement (square 2)</notes>
     <uminus>
       <refer refTo="ACDScrewSqMin3_d" />
     </uminus>
   </const>

   <const name="ACDScrewSqMin5_d">
      <notes>Displacement for squares 1 and 6</notes>
      <mul>
        <refer refTo="ACDScrewSqMin_d" />
        <const value="5" uType="count" />
      </mul>
   </const>

   <const name="ACDScrewSqMin5_dn">
     <notes>Neg. displacement (square 1)</notes>
     <uminus>
       <refer refTo="ACDScrewSqMin5_d" />
     </uminus>
   </const>

   <const name="screwInSq_d" >
     <notes>Displacement of a screw from center of screw square</notes>
     <half>
       <refer refTo="ACDScrewCenterDiff" />
     </half>
   </const>

   <const name="screwInSq_dn" >
     <notes>Negative displacement of a screw from center of 
          screw square</notes>
     <uminus>
       <refer refTo="screwInSq_d" />
     </uminus>
   </const>
-->
  <const name="ACDSide_z" >
    <notes>Total height of an ACD side of tiles 
        (tiles plus gaps)</notes>
    <add>
      <refer refTo="sideTileHeight0" />
      <refer refTo="sideTileHeight1" />
      <refer refTo="sideTileHeight2" />
      <refer refTo="sideTileHeight3" />
      <mul>
        <minus>
          <refer refTo="numSideRows" />
          <const value="1" uType="count" />
        </minus>
        <refer refTo="sideVerticalGap" />
      </mul>
    </add>
  </const>


  <const name="tileHalfThickness" >
    <notes>for convenience</notes>
    <half>
      <refer refTo="tileThickness" />
    </half>
  </const>


  <const name="ACDSideDovetail_d" >
    <notes>Side tiles  on sides parallel to X-axis (sides 2 and 4)
           have a displacement in X of this amount, positive
           for side 2 and negative for side 4.  Similarly side 3
           is displaced positively in Y by this amount, side 1 
           negatively.
    </notes>
    <quo>
      <add>
        <refer refTo="tileThickness" />
        <refer refTo="dovetailGap" />
      </add>
      <const value="2" uType="count" />
    </quo>
  </const>

  <const name="ACDSideDovetail_dn" >
    <notes>Dovetail displacement for "negative" ACD sides</notes>
    <uminus>
      <refer refTo="ACDSideDovetail_d" />
    </uminus>
  </const>


<!-- Additionally need to compute bunch of displacements to be used
     in constructing ACD top:

     For tiles, 
          need 3 different Z displacements,
                    topTileCent_dz
                    topTileMid_dz
                    topTileEdge_dz
-->
  <const name="topTileEdge_dz">
    <notes>Displacement w.r.t. LAT origin of 
          highest tiles, those in row [was col before Nov 05] 0 and 4</notes>
    <minus>
      <refer refTo="ACDTileMaxZ" />
      <refer refTo="tileHalfThickness" />
    </minus>
  </const>

  <const name="topTileMid_dz">
    <notes>Displacement w.r.t. LAT origin for
          tiles in rows [was cols before Nov 05] 1 and 3</notes>
    <minus>
      <refer refTo="topTileEdge_dz" />
      <add>
        <refer refTo="tileThickness" />
        <refer refTo="topTileOuterZGap" />
      </add>
    </minus>
  </const>

  <const name="topTileCent_dz">
    <notes>Displacement w.r.t. LAT origin for
          tiles in row [was col before Nov 05] 2</notes>
    <minus>
      <refer refTo="topTileMid_dz" />
      <add>
        <half>
          <add>
            <refer refTo="tileThickness" />
            <refer refTo="tileCenterThickness" />
          </add>
        </half>
        <refer refTo="topTileInnerZGap" />
       </add>
    </minus>
  </const>

<!-- 2 Y-displacements (for rows 3, 4) and their negatives (for rows 1,0)
   Revised for Nov. 05 where overlap direction was corrected.  -->
  <const name="topTileMid_dy" >
    <notes>Y displacement of top tiles in row 3 </notes>
    <minus>
      <half>
        <add>
          <refer refTo="topTileYCentral_l" />
          <refer refTo="topTileYMid_l" />
        </add>
      </half>
      <refer refTo="topOverlap" />
    </minus>
  </const>
    
  <const name="topTileMid_dyn" >
    <notes>Y displacement of top tiles in row 1 </notes>
    <uminus>
      <refer refTo="topTileMid_dy" />
    </uminus>
  </const>

  <const name="topTileEdge_dy" >
    <notes>Y displacement of top tiles in row 4 </notes>
    <add>
      <refer refTo="topTileMid_dy" />
      <half>
        <add>
          <refer refTo="topTileYMid_l" />
          <refer refTo="topTileYEdge_l" />
        </add>
      </half>
      <uminus>
        <refer refTo="topOverlap" />
      </uminus>
    </add>
  </const>

  <const name="topTileEdge_dyn" >
    <notes>Y displacement of top tiles in row 0 </notes>
    <uminus>
      <refer refTo="topTileEdge_dy" />
    </uminus>
  </const>


<!-- 2 X-displacements (for cols 3,4) and their negatives (for cols 1,0)
   Revised for Nov. 05 where overlap direction was corrected.
 -->
  <const name="topTileMid_dx" >
    <notes>X displacement of tiles in col 3</notes>
    <add>
      <half>
         <add>
           <refer refTo="topTileXCentral_l" />
           <refer refTo="topTileXMid_l" />
         </add>
      </half>
      <refer refTo="topTileGap" />
    </add>
  </const>

  <const name="topTileMid_dxn" >
    <notes>X displacement of tiles in col 1</notes>
    <uminus>
      <refer refTo="topTileMid_dx" />
    </uminus>
  </const>

  <const name="topTileEdge_dx" >
    <notes>X displacement of tiles in col 4</notes>
    <add>
      <refer refTo="topTileMid_dx" />
      <half>
         <add>
           <refer refTo="topTileXEdge_l" />
           <refer refTo="topTileXMid_l" />
         </add>
      </half>
      <refer refTo="topTileGap" />
    </add>
  </const>
    
  <const name="topTileEdge_dxn" >
    <notes>X displacement of tiles in col 0</notes>
    <uminus>
      <refer refTo="topTileEdge_dx" />
    </uminus>
  </const>

 <!-- Displacements for extra pieces stuck on to make bent tiles of the
      top tiles in row 0 and row 4.  Z is the same for all.  X-displacement
      depends on column (5 possible values, one being zero) and 
      Y-displacement on row (2 possible values).  Don't bother to define
      the X-displacements since they're the same as main pieces -->
  <const name="topTileBent_dz" >
    <notes>Z displacement w.r.t origin of extra pieces needed to make
           bent tiles</notes>
    <minus>
      <refer refTo="topTileEdge_dz" />
      <half>
        <add>
          <refer refTo="tileThicknessOp" />
          <refer refTo="topTileBentZOp" />
        </add>
      </half>
    </minus>
  </const>

  <const name="topTileBentR0_dy">
    <notes>Y displacement w.r.t origin of extra pieces needed to make
           bent tiles in row 0</notes>
    <minus>
      <refer refTo="topTileEdge_dyn" />
      <half>
        <minus>
          <refer refTo="topTileYEdge_lOp" />
          <refer refTo="tileThicknessOp" />
        </minus>
      </half>
    </minus>
  </const>

  <const name="topTileBentR4_dy">
    <notes>Y displacement w.r.t origin of extra pieces needed to make
           bent tiles in row 0</notes>
    <uminus>
      <refer refTo="topTileBentR0_dy" />
    </uminus>
  </const>

<!-- Ribbon stuff -->

  <const name="topYRibbon_dz" >
    <notes>(Absolute) Z displacement
          for long ribbon segments running || to
          X-axis along top.</notes>
    <refer refTo="yRibbonTopAbs_dz" />
  </const>

  <const name="ribbonHalfThickness" >
    <notes>for convenience</notes>
    <half>
      <refer refTo="ribbonThickness" />
    </half>
  </const>
          
<!-- Ribbon dimensions.   An xRibbon is one more or less contained in
      a plane of constant x (perp. to x axis) and similarly for yRibbon. 
      In current (may 2007) model xRibbons are divided into 9 segments
      (5 longish horizontal pieces, 4 small vertical ones) along top; 
      yRibbons have only a single top segment
  -->
         
  <const name="yRibbonTop_l">
    <notes>These ribbons run the full distance across ACDTop
        (actually more, but that's all that will fit)</notes>
    <refer refTo="ACDTopTransverse" />
  </const>

  <!-- There are 3 different possible lengths for bits of X ribbon running
       horizontally along the top:
       one for ribbon segments under the central row of tiles, one for 
       ribbon segments under "mid" tiles (rows 1 and 3) and one
       for ribbon segments under the outer rows (0 and 4).     -->


  <const name="xRibbonTopCent_l">
    <notes>length of ribbon segments running under the central row
      of tiles. Redo to include short vertical pieces May 07.</notes>
    <add>
      <refer refTo="topTileYCentral_l" />
      <refer refTo="ribbonThickness" />
      <refer refTo="ribbonThickness" />
      <refer refTo="ribbonExtend" />
      <refer refTo="ribbonExtend" />
    </add>
  </const>

  <const name="xRibbonTopMid_l">
    <notes>length of ribbon segments running under rows 1,3
      of top tiles. Redo to include short vertical pieces May 07.</notes>
    <minus>
      <add>
        <refer refTo="topTileYMid_l" />
        <refer refTo="ribbonThickness" />
      </add>
      <refer refTo="topOverlap" />
    </minus>
  </const>

  <const name="xRibbonTopEdge_l">
    <notes>length of ribbon segments running under rows 0,4
      of top tiles.  Redo to include short vertical pieces May 07.</notes>
    <minus>
      <refer refTo="topTileYEdge_l" />
      <add>
        <refer refTo="topOverlap" />
        <refer refTo="ribbonExtend" />
        <refer refTo="ribbonGap" />
        <refer refTo="tileThickness" />
      </add>
    </minus>
  </const>            

  <const name="xRibbonOuter_dxn">
    <notes>X displacement for X-ribbon #0</notes>
    <uminus>
      <refer refTo="xRibbonOuter_dx" />
    </uminus>
  </const>

  <const name="xRibbonInner_dxn">
    <notes>X displacement for X-ribbon #1</notes>
    <uminus>
      <refer refTo="xRibbonInner_dx" />
    </uminus>
  </const>

  <const name="yRibbonOuter_dyn">
    <notes>Y displacement for Y-ribbon #0</notes>
    <uminus>
      <refer refTo="yRibbonOuter_dy" />
    </uminus>
  </const>

  <const name="yRibbonInner_dyn">
    <notes>Y displacement for Y-ribbon #1</notes>
    <uminus>
      <refer refTo="yRibbonInner_dy" />
    </uminus>
  </const>

<!-- z displacements for the different horizontal segments of the X ribbons. 
     Make them a fixed distance (ribbonGap) underneath the corresponding top
     tile.

     Each of the 4 X ribbons is divided into 5 horiz segments (and 4 little
     vertical segments). For the horizontal segments there are
       * 3 different Z displacements, computed from top tile Z displacements
       * 2 X displacments and their negatives, handled above already
           as xRibbonInner_dx, xRibbonOuter_dx
       * 2 Y displacements, their negatives, and 0 displacement for center
         piece

     Also compute Z-displacement of ribbonBent pieces (they are just
     below XRibbonEdge pieces) and transverse (Y) displacement: leave
     gap 'ribbonGap' between these pieces and bent tile pieces.
 -->
  <const name="topXRibbonEdge_dz">
    <notes>Z displacement for outer segments (1 and 5) of top ribbons
           running perp. to X axis</notes>
    <minus>
      <refer refTo="topTileEdge_dz" />
      <add>
        <refer refTo="tileHalfThickness" />
        <refer refTo="ribbonHalfThickness" />
        <refer refTo="ribbonGap" />
      </add>
    </minus>
  </const>


  <const name="topXRibbonMid_dz">
    <notes>Z displacement for mid segments (2 and 4) of 
           top ribbons perp. to x-axis </notes>
    <minus>
      <refer refTo="topTileMid_dz" />
      <add>
        <refer refTo="tileHalfThickness" />
        <refer refTo="ribbonHalfThickness" />
        <refer refTo="ribbonGap" />
      </add>
    </minus>

  </const>

  <const name="topXRibbonCent_dz">
    <notes>Z displacement for central segment (3) of 
           top ribbons perp. to x-axis </notes>
    <minus>
      <refer refTo="topTileCent_dz" />
      <add>
        <half>
          <refer refTo="tileCenterThickness" />
        </half>
        <refer refTo="ribbonHalfThickness" />
        <refer refTo="ribbonGap" />
      </add>
    </minus>
  </const>

  <!-- go to edge of central tile, add ribbon extend and half our length -->

  <const name="topXRibbonMid_dy" >
    <notes>y-displacement of segment 4 (updated May 07) </notes>
    <add>
      <refer refTo="ribbonExtend" />
      <half>
        <add>
          <refer refTo="topTileYCentral_l" />
          <refer refTo="xRibbonTopMid_l" />
        </add>
      </half>
    </add>
  </const>

  <const name="topXRibbonMid_dyn" >
    <notes>y-displacement of segment 2 </notes>
    <uminus>
      <refer refTo="topXRibbonMid_dy" />
    </uminus>
  </const>

  <!-- go to center of mid tile, add half tile length (to get
     to edge) half our length and finally ribbonExtend -->


  <const name="topXRibbonEdge_dy" >
    <notes>y-displacement of segment 5 </notes>
    <add>
      <refer refTo="topTileMid_dy" />
      <half>
        <add>
          <refer refTo="topTileYMid_l" />
          <refer refTo="xRibbonTopEdge_l" />
        </add>
      </half>
      <refer refTo="ribbonExtend" />
    </add>
  </const>

  <const name="topXRibbonEdge_dyn" >
    <notes>y-displacement of segment 1 </notes>
    <uminus>
      <refer refTo="topXRibbonEdge_dy" />
    </uminus>
  </const>



  <!-- Compute stuff needed for little vertical connecting top x ribbons -->
  <const name="xRibbonTopVertNear_l" >
    <notes>Height of vert. piece connecting mid and central 
           top X ribbons</notes>
    <minus>
      <refer refTo="topXRibbonMid_dz" />
      <add>
        <refer refTo="topXRibbonCent_dz" />
        <refer refTo="ribbonThickness" />
      </add>
    </minus>
  </const>

  <const name="topVertNearXRibbon_dz" >
    <notes>Z location of vert. piece connecting mid and central top X ribbons
    </notes>
    <add>
      <refer refTo="topXRibbonCent_dz" />
      <half>
        <add>
          <refer refTo="xRibbonTopVertNear_l" />
          <refer refTo="ribbonThickness" />
        </add>
      </half>
    </add>
  </const>

  <const name="topVertNearXRibbon_dy" >
    <notes>Y location of vert. piece connecting mid and central top X ribbons
       (+Y version)
    </notes>
    <half>
      <minus>
        <refer refTo="xRibbonTopCent_l" />
        <refer refTo="ribbonThickness" />
      </minus>
    </half>
  </const>

  <const name="topVertNearXRibbon_dyn" >
    <notes>Y location of vert. piece connecting mid and central top X ribbons
      (-Y version) </notes>
    <uminus>
      <refer refTo="topVertNearXRibbon_dy" />
    </uminus>
  </const>
 
  <const name="xRibbonTopVertFar_l" >
    <notes>Height of vert. piece connecting edge and mid top X ribbons</notes>
    <minus>
      <refer refTo="topXRibbonEdge_dz" />
      <add>
        <refer refTo="topXRibbonMid_dz" />
        <refer refTo="ribbonThickness" />
      </add>
    </minus>
  </const>

  <const name="topVertFarXRibbon_dz" >
    <notes>Z location of vert. piece connecting mid and edge top X ribbons
    </notes>
    <add>
      <refer refTo="topXRibbonMid_dz" />
      <half>
        <add>
          <refer refTo="xRibbonTopVertFar_l" />
          <refer refTo="ribbonThickness" />
        </add>
      </half>
    </add>
  </const>
 
  <const name="topVertFarXRibbon_dy" >
    <notes>Y location of vert. piece connecting mid and edge top X ribbons
       (+Y version)
    </notes>
    <add>
      <refer refTo="topVertNearXRibbon_dy" />
      <refer refTo="xRibbonTopMid_l" />
      <uminus>
        <refer refTo="ribbonThickness" />
      </uminus>
    </add>
  </const>   


  <const name="topVertFarXRibbon_dyn" >
    <notes>Y location of vert. piece connecting mid and edge top X ribbons
      (-Y version) </notes>
    <uminus>
      <refer refTo="topVertFarXRibbon_dy" />
    </uminus>
  </const>

<!-- Stuff for new, more realistic model of side ribbons -->

  <const name="ribbonBentZ" > 
    <notes>Part of side X ribbon running behind bent piece of top tile
           and part of side tile row 0.  Revised May '07 for
           more realistic side ribbon description.</notes>
    <minus>
      <add>
        <refer refTo="topTileBentZ" />
        <refer refTo="ribbonExtendSide" />
<!--        <refer refTo="ribbonExtend" />     REVISE aug 07 -->
      </add>
      <refer refTo="ribbonGap" />
    </minus>
  </const>

  <const name="ribbonBent_dz">
    <notes>Z displacement of extra little pieces of ribbon behind bent tiles
    </notes>
    <minus>
      <refer refTo="topTileEdge_dz" />
      <add>
        <refer refTo="ribbonThickness" />
        <refer refTo="ribbonGap" />
        <half>
          <add>
            <refer refTo="ribbonBentZ" />
            <refer refTo="tileThickness" />
          </add>
        </half>
      </add>
    </minus>
  </const>


  <const name="ribbonBentR4_dy">
    <notes>Y displacement for ribbons behind bent tiles in row 4</notes>
    <minus>
      <refer refTo="topTileBentR4_dy" />
      <add>
        <refer refTo="ribbonGap" />
        <half>
          <add>
            <refer refTo="tileThickness" />
            <refer refTo="ribbonThickness" />
          </add>
        </half>
      </add>
    </minus>
  </const>

  <const name="ribbonBentR0_dy">
    <notes>Y displacement for ribbons behind bent tiles in row. 0</notes>
    <uminus>
      <refer refTo="ribbonBentR4_dy" />
    </uminus>
  </const>

<!-- might have to compute lengths separately for each of 3 cases:
     1. angled segment near bent tile  (X-ribbons only)
         length = sqrt(tile-thickness**2 + ribbonExtendSide**2) 
     2. angled segment running from side tile row 0 to 1
         length = sqrt(8**2 + ribbonExtendSide**2)
     3. angled segment runnning from side tile row 1 to 2
         same as case 1.
    1 & 3 end up being the same since for 1 we go from one vert. tile to
    another and for 3 we go from one slanted tile to another.  

    It really doesn't matter about going from 2 to 3 since 3 is a single
    tile with no gap to be covered
 -->

  <const name="ribSideToR0_y" >
    <notes>Projection in Y of length of angled ribbon pieces just below 
           segments behind bent tiles.  Will probably have to subtract a 
           little to avoid overlaps with adjacent ribbon segments.
    </notes>
    <minus> 
      <refer refTo="tileSideR0_dt" />
      <refer refTo="topTileBentR4_dy" />
    </minus>
  </const>

  <const name="ribSideToR0_len">
    <notes>Length of angled ribbon pieces just below segments behind
           bent tiles.  Will probably have to subtract a little
           to avoid overlaps with adjacent ribbon segments.
    </notes>
    <sqrt>
      <add>
        <mul>
          <refer refTo="ribSideToR0_y" />
          <refer refTo="ribSideToR0_y" />
        </mul>
        <mul>
          <refer refTo="ribbonExtendAngleSide" />
          <refer refTo="ribbonExtendAngleSide" />
        </mul>
      </add>
    </sqrt>
  </const>

  <const name="ribSideToR0_dz" >
    <notes> Z-displacement.  Compute from Z-displacement of ribbons
            behind bent tiles and ribbon Z-extents</notes>
    <minus>
      <refer refTo="ribbonBent_dz" />
      <half>
        <add>
          <refer refTo="ribbonBentZ" />
          <refer refTo="ribbonExtendAngleSide" />
        </add>
      </half>
    </minus>
  </const>

  <const name="ribSideToR0_a" uType="count">
    <notes>Angle of ribbon pieces going from behind bent tile to 
           row 0 tile (Y+ side)
    </notes>
    <atan>
      <quo>
        <minus> 
          <refer refTo="tileSideR0_dt" />
          <refer refTo="topTileBentR4_dy" />
        </minus>
        <refer refTo="ribbonExtendAngleSide" />
      </quo>
    </atan>
  </const>

  <const name="ribSideToR0_an" uType="count">
    <notes>Angle of ribbon pieces going from behind bent tile to 
           row 0 tile (Y- side)
    </notes>
    <uminus>
      <refer refTo="ribSideToR0_a" />
    </uminus>
  </const>

  <const name="ribSideToR0_dy">
    <notes>Transverse displacement of angled ribbons just below
        bent tiles (+Y side)
    </notes>
    <add>
      <refer refTo="ribbonBentR4_dy" />
      <half>
        <minus>
          <refer refTo="tileSideR0_dt" />
          <refer refTo="topTileBentR4_dy" />
        </minus>
      </half>
    </add>
  </const>

  <const name="ribSideToR0_dyn">
    <notes>Transverse displacement of angled ribbons just below
        bent tiles (-Y side)
    </notes>
    <uminus>
      <refer refTo="ribSideToR0_dy" />
    </uminus>
  </const>

  <const name="ribSideToR0_z" >
    <notes>Z-extent is length * cos angle</notes>
    <mul>
      <refer refTo="ribSideToR0_len" />
      <cos>
        <refer refTo="ribSideToR0_a" />
      </cos>
    </mul>
  </const>

<!--
  <const name="ribSideToR0MaxY" >
    <notes>max Y for this (ToR0) side segment is min Y for the next one
    </notes>
    <add>
      <refer refTo="ribSideToR0_dy" />
      <half>
        <refer refTo="ribSideToR0_y" />
      </half>
     </add>
   </const>
-->
  <const name="ribSideToR0MinZ" >
    <notes>min Z for this (ToR0) side segment is maxZ for the next one
    </notes>
    <minus>
      <refer refTo="ribSideToR0_dz" />
      <half>
        <refer refTo="ribSideToR0_z" />
      </half>
    </minus>
  </const>

  <const name="ribYSideR0MaxZ" >
    <notes>Equals min Z of segment above</notes>
    <refer refTo="ribSideToR0MinZ" />
  </const>

  <const name="ribYSideR0MinZ" >
    <notes>Extends a known distance beyond min z of side tile R0</notes>
    <minus>
      <minus>
        <refer refTo="tileSideR0_dz" />
        <half>
          <refer refTo="sideTileHeight0" />
        </half>
      </minus>
      <refer refTo="ribbonExtendSide" />
    </minus>
  </const>  

  <const name="ribYSideR0_z" >
    <notes> Z extent (=length) of ribbon segment on Y-side behind 
           tile row 0 </notes>
    <minus>
      <refer refTo="ribYSideR0MaxZ" />
      <refer refTo="ribYSideR0MinZ" />
    </minus>
  </const>

  <const name="ribToTile" >
    <notes>distance from (e.g.) vert. side tile cm in transverse direction
           to cm of ribbon behind</notes>
    <add>
      <half>
        <add>
          <refer refTo="tileThickness" />
          <refer refTo="ribbonThickness" />
        </add>
      </half>
      <refer refTo="ribbonGap" />
    </add>
  </const>

  <const name="ribYSideR0_dy" >
    <notes>Displacement on +Y side of ribbons behind tile 0</notes>
    <minus>
      <refer refTo="tileSideR0_dt" />
      <refer refTo="ribToTile" />
    </minus>
  </const>

  <const name="ribYSideR0_dyn" >
    <notes>Displacement on -Y side of ribbons behind tile 0</notes>
    <uminus>
      <refer refTo="ribYSideR0_dy" />
    </uminus>
  </const>

  <const name="ribYSideR0_dz" >
    <notes>Displacement on Y sides of ribbons behind tile 0</notes>
    <half>
      <add>
        <refer refTo="ribYSideR0MaxZ" />
        <refer refTo="ribYSideR0MinZ" />
      </add>
    </half>
  </const>  

  <const name="ribToR1MaxZ">
    <notes>top of ribbon segment behind R1 on +Y and -Y sides</notes>
    <refer refTo="ribYSideR0MinZ" />
  </const>

  <const name="ribToR1MinZ">
    <notes>bottom of ribbon segment behind R1 on +Y and -Y sides</notes>
    <minus>
      <refer refTo="ribToR1MaxZ" />
      <refer refTo="ribbonExtendAngleSide" />
    </minus>
  </const>

  <const name="ribToR1_dz" >
    <notes>Z disp. of ribbon segment behind R1 on +Y and -Y sides</notes>
    <half>
      <add>
        <refer refTo="ribToR1MaxZ" />
        <refer refTo="ribToR1MinZ" />
      </add>
    </half>
  </const>

  <const name="ribToR1MinY">
    <notes>innermost Y of ribbon segment behind R1 on +Y and -Y sides</notes>
    <refer refTo="ribYSideR0_dy" />
  </const>

  <const name="ribToR1MaxY">
    <notes>(MaxY  + ribToTile , MinZ) is on the line through R1 tile.
           Have a point on this line (cm of R1 tile) and its slope,
           so can solve for MaxY:         tan(angle) = &lt;br /&gt;
   (ToR1MaxY + ribToTile -sideTileR1_dt) / (toR1MinZ - sideTileR1_dz)
    </notes>
    <add>
      <mul>
        <tan>
          <refer refTo="sideTileR1_an" />
        </tan>
        <minus>
          <refer refTo="ribToR1MinZ" />
          <refer refTo="tileSideR1_dz" />
        </minus>
      </mul>
      <refer refTo="tileSideR1_dt" />
      <uminus>
        <refer refTo="ribToTile" />
      </uminus>
    </add>
  </const>

  <const name="ribToR1_dy" >
    <notes>transverse displacement of ribbon segment (+Y side)</notes>
    <half>
      <add>
        <refer refTo="ribToR1MinY" />  
        <refer refTo="ribToR1MaxY" />  
      </add>
    </half>
  </const>

  <const name="ribToR1_dyn" >
    <notes>transverse displacement of ribbon segment (-Y side)</notes>
    <uminus>
      <refer refTo="ribToR1_dy" />
    </uminus>
  </const>
     
  <const name="ribToR1_a" uType="count" >
    <notes> Angle for ribbon segment (+Y side).  </notes>
    <atan>
      <quo>
        <minus>
          <refer refTo="ribToR1MaxY" />
          <refer refTo="ribToR1MinY" />
        </minus>
        <minus>
          <refer refTo="ribToR1MaxZ" />
          <refer refTo="ribToR1MinZ" />
        </minus>
      </quo>
    </atan>
  </const>

  <const name="ribToR1_an" uType="count" >
    <notes> Angle for ribbon segment (-Y side)</notes>
    <uminus>
      <refer refTo="ribToR1_a" />
    </uminus>
  </const>
  
  <const name="ribToR1_len" >
    <notes>Length of this ribbon segment.  </notes>
    <quo>
      <minus>
        <refer refTo="ribToR1MaxZ" />
        <refer refTo="ribToR1MinZ" />
      </minus>
      <cos>
         <refer refTo="ribToR1_an" />
      </cos>
    </quo>
  </const>
 
  <const name="ribR1MaxZ" >
    <notes>Ribbons behind row 1 side tiles on Y faces</notes>
    <refer refTo="ribToR1MinZ" />
  </const>

  <const name="ribR1MaxY" >
    <notes>Ribbons behind row 1 side tiles on Y faces</notes>
    <refer refTo="ribToR1MaxY" />
  </const>

  <const name="ribR1MinZ" >
    <notes>Ribbons behind row 1 side tiles on Y faces extend
           a fixed amount beyond bottom of tile</notes>
    <minus>
      <refer refTo="tileSideR1_dz" />
      <add>
        <mul>
          <refer refTo="sideTileHeight1" />
          <cos>
            <refer refTo="sideTileR1_a" />
          </cos>
          <const uType="count" value="0.5" />
        </mul>
        <refer refTo="ribbonExtendSide" />
      </add>
    </minus>
  </const>


  <const name="ribR1_dz" >
    <notes>Ribbons behind row 1 side tiles on Y faces</notes>
    <half>
      <add>
        <refer refTo="ribR1MaxZ" />
        <refer refTo="ribR1MinZ" />
      </add>
    </half>
  </const>

  <const name="ribR1_len" >
    <notes>Ribbons behind row 1 side tiles on Y faces</notes>
    <quo>
      <minus>
        <refer refTo="ribR1MaxZ" />
        <refer refTo="ribR1MinZ" />
      </minus>
      <cos>
        <refer refTo="sideTileR1_a" />
      </cos>
    </quo>
  </const>

  <const name="ribR1MinY" >
    <notes>Ribbons behind row 1 side tiles on Y faces</notes>
    <minus>
      <refer refTo="ribR1MaxY" />
      <mul>
        <refer refTo="ribR1_len" />
        <sin>
          <refer refTo="sideTileR1_a" />
        </sin>
      </mul>
    </minus>
  </const>

  <const name="ribR1_dy" >
    <notes>Y-disp for ribbons behind row 1 side tiles on +Y face</notes>
    <half>
      <add>
        <refer refTo="ribR1MaxY" />
        <refer refTo="ribR1MinY" />
      </add>
    </half>
  </const>
 
  <const name="ribR1_dyn" >
    <notes>Y-disp for ribbons behind row 1 side tiles on -Y face</notes>
    <uminus>
      <refer refTo="ribR1_dy" />
    </uminus>
  </const>

   <!--  comment out original segmented side ribbon stuff for now 
         See noslantsideribbons.xml -->

 

  <const name="ACDSideSupport_dDovetailn">
    <notes>Negative dovetail distance for those sides 
           that need it.</notes>
    <uminus>
      <refer refTo="ACDSideSupport_dDovetail" />
    </uminus>
  </const>

  <const name="ACDSideSupport_dtn">
    <notes>Transverse (x or y) distance of support side from 
           Ritz origin, negative</notes>
    <uminus>
      <refer refTo="ACDSideSupport_dt" />
    </uminus>
  </const>


  <!-- Old stuff having to do with counts, ranges of id fields
       is probably still useful -->
  <const name="XTopTileMax" uType="count" type="int">
    <notes>Convenience for idField definitons</notes>
    <minus>
      <refer refTo="numXTopTiles" />
      <const value="1.0" />
    </minus>
  </const>

  <const name="YTopTileMax" uType="count" type="int">
    <notes>Convenience for idField definitons</notes>
    <minus>
      <refer refTo="numYTopTiles" />
      <const value="1" uType="count" />
    </minus>
  </const>


  <const name="ACDShortRowMin" uType="count"  type="int">
    <notes>row number of first short ACD side row</notes>
    <add>
      <refer refTo="ACDLongRowMax" />
      <const value="1" uType="count" />
    </add>
  </const>

  <const name="ACDShortRowMax" uType="count"  type="int">
    <notes>row number of last short ACD side row</notes>
    <minus>
      <refer refTo="numSideRows" />
      <const value="1" uType="count" />
    </minus>
  </const>

  <const name="ACDShortMaxCol" uType="count" type="int">
    <notes>Column number of last tile in a short row</notes>
    <minus>
      <refer refTo="numPerSideRowShort" />
      <const value="1" uType="count" />
    </minus>
  </const>

  <const name="ACDLongMaxCol" uType="count" type="int">
    <notes>Column number of last tile in a long row</notes>
    <minus>
      <refer refTo="numPerSideRowLong" />
      <const value="1" uType="count" />
    </minus>
  </const>



</derCategory>
